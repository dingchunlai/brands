/* 泡泡效果 */
jQuery.fn.bubbles = function() {
  var positions = [
    "28,64#131,195#92,113#8,205#100,16#9,7#162,38#19,152#163,141#84,192",
    "10,131#78,84#103,8#143,135#85,192#31,22#159,69#14,215#7,83#155,214",
    "55,122#136,93#83,26#36,202#154,8#23,4#118,179#17,75#9,151#165,222",
    "3,72#104,83#81,10#43,205#152,20#16,7#143,164#60,142#12,160#156,219",
    "11,71#140,196#98,75#41,203#149,28#10,7#92,11#18,152#150,141#83,149",
    "20,70#140,196#89,124#13,205#99,47#10,7#162,17#10,152#165,119#90,193",
    "10,63#138,165#78,119#22,205#104,50#48,5#162,23#6,149#166,99#90,204",
    "8,22#137,185#58,136#9,199#103,77#87,11#160,13#5,104#163,120#85,222",
    "37,35#124,193#51,136#5,188#110,95#106,8#163,49#7,97#166,145#72,225",
    "54,56#119,196#53,177#7,126#123,106#148,38#86,2#4,18#168,154#4,226",
    "4,54#127,118#85,201#31,148#156,209#97,23#4,213#82,95#165,70#28,1",
    "9,58#138,99#87,168#11,145#152,208#85,13#33,216#83,111#162,36#29,5",
    "13,51#138,108#91,184#22,145#157,211#90,22#11,214#83,103#172,34#13,2",
    "7,51#139,87#90,165#23,135#153,210#90,14#20,212#85,87#160,34#37,3",
    "5,58#140,56#110,138#26,140#138,209#71,10#52,221#85,90#142,9#16,3",
    "4,75#140,61#131,137#15,159#150,210#78,49#72,212#78,124#132,13#23,22",
    "10,78#139,49#141,132#8,168#155,204#72,38#86,207#83,128#125,6#10,15",
    "3,105#80,66#148,107#76,149#154,194#64,5#97,217#16,215#138,6#10,45",
    "3,105#111,121#148,53#19,187#154,191#57,5#98,206#77,84#132,6#14,50",
    "3,113#103,112#148,49#21,198#154,185#34,3#96,195#68,71#107,23#10,63",
    "11,118#133,11#106,150#73,65#151,210#19,14#90,218#157,103#2,75#29,206",
    "5,118#122,8#113,146#73,77#154,206#36,5#83,218#158,90#12,68#20,206",
    "12,127#114,5#98,145#68,68#153,194#36,11#77,211#146,92#4,66#20,214",
    "15,138#97,2#134,127#76,88#139,200#29,21#77,219#162,67#6,89#12,226",
    "23,138#88,2#142,115#77,85#145,187#16,22#84,217#163,60#6,100#21,226",
    "19,149#80,2#148,104#79,85#150,179#10,25#103,217#163,43#7,104#51,226",
    "2,156#73,6#142,89#64,113#152,166#10,28#109,217#151,24#7,104#59,226",
    "81,152#60,3#107,74#16,110#155,144#4,46#149,215#144,14#4,186#51,225",
    "88,169#44,4#96,71#5,162#156,122#9,74#160,208#134,14#75,130#58,225",
    "92,162#36,5#104,68#3,170#157,131#9,83#161,213#124,11#69,125#58,227",
    "13,71#140,188#89,123#19,205#92,38#26,3#155,11#7,152#159,107#90,202",
    "13,79#140,174#88,113#21,207#87,26#18,14#152,24#4,158#159,94#95,211",
    "15,79#134,166#93,100#25,204#76,15#7,14#150,18#7,156#158,80#83,169",
    "4,90#142,138#95,65#15,184#65,6#3,10#141,6#73,147#168,70#122,207",
    "5,96#140,111#80,65#22,195#58,2#3,34#134,6#86,168#167,54#147,207",
    "3,110#138,109#75,70#27,198#50,3#3,44#124,8#95,179#168,47#168,207",
    "2,122#138,102#70,71#27,205#44,1#3,54#118,9#103,183#168,43#168,196",
    "30,133#138,88#71,58#10,206#33,2#6,71#113,4#116,173#165,33#170,202",
    "7,144#139,94#73,63#71,205#23,3#6,75#102,5#94,153#171,38#158,194",
    "2,160#133,95#64,52#81,205#10,16#9,87#120,10#84,145#164,47#163,186",
    "29,65#140,186#97,112#19,204#90,28#4,7#161,35#5,145#171,108#87,187",
    "34,62#136,186#108,110#19,204#90,17#3,11#161,20#13,145#170,92#87,175",
    "35,72#136,173#114,101#21,204#70,3#3,18#147,9#12,149#167,69#85,177",
    "26,72#128,175#116,101#42,204#76,4#6,12#150,6#9,160#166,64#71,151",
    "16,76#137,152#104,81#58,204#72,13#4,5#140,6#2,168#166,54#84,152",
    "7,118#137,166#95,72#71,204#60,16#7,54#133,4#5,206#169,48#93,150",
    "10,118#138,144#95,57#85,197#51,7#12,55#127,4#10,205#169,43#89,134",
    "6,124#139,139#95,63#89,200#48,7#11,62#117,4#21,212#170,52#89,144",
    "7,127#139,129#85,63#111,201#36,7#3,62#112,4#27,220#165,45#89,144",
    "7,145#139,108#73,62#130,201#26,8#3,76#110,4#51,217#165,41#89,146",
    "89,157#40,4#109,63#5,155#156,119#12,88#160,201#124,6#72,120#61,223",
    "94,151#20,5#99,64#6,162#155,105#8,86#160,210#110,6#68,120#70,223",
    "110,126#12,5#79,58#8,170#154,65#4,99#160,197#98,2#65,134#84,217",
    "119,125#3,25#76,60#10,190#154,47#4,119#161,215#88,3#67,144#95,211",
    "122,121#3,39#81,62#13,201#148,24#4,129#146,205#82,3#68,133#86,197",
    "135,102#3,45#82,55#16,199#144,9#10,131#144,192#66,3#76,128#89,184",
    "135,91#3,60#79,47#28,203#136,8#1,145#158,184#42,4#82,128#97,179",
    "135,87#2,69#77,41#47,202#143,9#2,154#159,174#34,5#71,128#106,167",
    "136,69#2,81#62,34#63,203#132,4#6,176#161,181#9,9#84,117#113,165",
    "137,82#3,86#69,26#87,197#143,4#6,189#150,173#6,21#64,145#89,101",
    "17,126#143,128#80,82#13,204#44,7#5,62#112,9#85,193#163,49#139,218",
    "13,126#138,128#87,75#13,204#39,6#5,59#108,14#86,182#163,42#143,218",
    "6,126#138,107#79,67#43,205#35,4#12,60#101,8#90,150#163,25#164,192",
    "5,140#142,105#84,63#49,205#20,9#5,72#91,8#93,160#152,15#151,192",
    "2,146#137,102#74,66#55,205#9,9#5,82#82,8#93,153#144,16#143,191",
    "2,152#138,74#68,69#61,204#5,20#5,91#73,8#95,146#136,12#156,192",
    "1,157#138,68#68,72#70,203#4,26#5,95#68,8#106,146#130,12#162,189",
    "5,171#137,56#66,72#94,197#4,35#5,102#61,8#114,139#123,13#162,186",
    "15,188#141,40#73,66#103,200#4,45#27,121#54,8#136,129#114,8#173,183",
    "30,180#135,32#73,71#111,202#5,52#3,129#44,6#108,140#99,14#167,147",
    "7,123#138,142#94,57#78,204#48,3#10,54#133,5#17,208#169,60#93,133",
    "9,131#138,131#90,53#93,200#36,3#4,61#127,5#20,216#168,51#89,129",
    "4,132#139,117#73,51#103,199#19,6#4,70#115,6#39,214#168,44#88,137",
    "6,137#132,96#68,51#121,197#15,6#3,75#110,5#44,214#168,22#91,141",
    "5,163#132,96#60,52#147,186#7,13#3,86#96,3#83,220#159,25#95,155",
    "6,171#131,91#66,65#145,184#5,23#4,91#84,4#87,217#157,16#88,160",
    "6,184#135,88#66,74#141,180#4,28#4,103#75,7#90,217#147,16#84,160",
    "8,188#140,84#66,80#145,176#2,39#5,111#69,7#94,217#142,17#93,161",
    "12,187#140,78#68,69#147,167#16,31#11,111#76,7#97,216#149,14#86,159",
    "20,190#141,74#62,78#147,178#11,27#3,118#81,7#101,213#153,11#94,151",
    "20,183#139,62#68,69#112,202#9,26#92,139#75,11#6,113#133,7#164,164",
    "21,196#139,52#63,75#130,198#5,37#99,139#68,11#9,121#131,7#165,151",
    "32,191#133,48#63,68#140,198#6,49#108,132#50,9#10,132#117,7#172,141",
    "15,79#134,166#93,100#25,204#76,15#7,14#150,18#7,156#158,80#83,169",
    "5,94#135,195#88,69#34,204#143,132#7,14#150,14#78,152#168,83#81,20",
    "5,102#137,182#87,53#43,201#144,112#7,36#139,1#88,139#168,67#60,7",
    "4,121#137,166#82,45#60,195#148,100#7,50#125,3#91,124#168,51#52,7",
    "3,147#137,160#68,51#70,201#148,86#5,75#115,6#91,129#168,35#22,11",
    "3,157#138,145#49,40#76,199#122,81#5,87#108,6#82,129#166,35#11,11",
    "4,179#137,149#43,40#83,198#136,75#4,101#108,13#77,128#167,17#3,20",
    "5,62#141,159#70,121#29,200#98,53#56,4#148,13#3,149#158,80#106,222",
    "4,55#133,159#62,119#14,198#97,59#63,4#155,20#3,141#160,99#91,221",
    "4,49#133,165#62,125#18,197#103,65#70,5#159,25#5,133#165,117#90,222",
    "4,39#129,171#59,126#8,189#103,70#89,5#159,40#5,127#160,111#85,222",
    "16,33#131,179#69,135#7,184#96,71#95,4#159,31#5,118#164,116#76,225",
    "18,13#133,171#63,133#2,170#88,71#101,7#159,39#6,107#153,105#66,227",
    "23,13#124,189#71,138#3,167#106,81#107,3#161,54#19,106#168,133#50,228",
    "26,8#133,200#73,147#2,167#91,77#114,4#161,60#10,91#156,135#60,225",
    "36,8#130,197#77,147#1,157#85,77#120,3#164,67#5,86#149,135#53,225",
    "35,7#130,192#74,154#5,146#76,82#120,11#164,73#12,83#154,143#41,225"
  ];

  this.addClass('bubbles').css('position', 'relative');

  var nodes = this.children();
  if (nodes.length < 1) {
    this.parent().hide();
    return;
  }

  var colorlist = new Array(1, 2, 3, 4, 5);
  colorlist.sort(function() { return Math.random() > 0.5 ? -1 : 1; });

  var coorList = positions[Math.floor(Math.random() * positions.length)].split("#");

  nodes.each(function(i) {
    var coors = coorList[i].split(",");
    $(this).css({
      display: 'block',
      left: parseInt(coors[0]) + 'px',
      top: parseInt(coors[1]) + 'px'
    }).addClass('popo' + colorlist[parseInt(i / 2)] + '_' + parseInt((11 - i) / 2));
  });
};
